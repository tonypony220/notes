

lag - keep eye on it 
отличие Kafka от очередей  Сообщения в Kafka не удаляются брокерами o

Важно понять: внутри одной консьюмер-группы партиции назначаются консьюмерам уникально, чтобы избежать повторной обработки.
если больше то будут дубли 

Гарантия очерёдности данных — если вы пишете сообщения с ключами и хешируете номер партиции для сообщений, исходя из общего числа, то при добавлении новой партиции вы можете просто сломать порядок этой записи.

Партиции невозможно удалить после их создания, можно удалить только весь топик целиком.

И ещё неочевидный момент: если вы добавляете новую партицию на проде, то есть в тот момент, когда в топик пишут сообщения продюсеры, то важно помнить про настройку auto.offset.reset=earliest в консьюмере, иначе у вас есть шанс потерять или просто не обработать кусок данных, записавшихся в новую партицию до того, как консьюмеры обновили метаданные по топику и начали читать данные из этой партиции.

Ключевой для понимания факт: в момент времени может быть только один закоммиченный офсет для топик-партиции в консьюмер-группе. Иными словами, мы не можем закоммитить несколько офсетов для одной и той же топик-партиции, эмулируя каким-то образом выборочный acknowledgment (как это делалось в системах очередей).

Таким образом, в Кафка потребитель вытягивает (pull) нужное сообщение из топика, ориентируясь на смещение (offset). В RabbitMQ, наоборот, consumer не заботится о получении информации – брокер сам обеспечивает всю логику работы с сообщениями, проталкивая их потребителям (push). Из-за такой специфики работы с отправителями и потребителями RabbitMQ не гарантирует строго однократную доставку сообщений, при этом предоставляя гарантии «at most once» и «at least once», как и Кафка

https://stackoverflow.com/questions/39730126/difference-between-session-timeout-ms-and-max-poll-interval-ms-for-kafka-0-10
https://vc.ru/u/1028591-lysenko-andrey/440679-chtenie-iz-kafka-bez-incidentov
https://www.bigdataschool.ru/blog/kafka-exactly-once.html
https://habr.com/ru/company/southbridge/blog/547264/
https://architecturenotes.co/fallacies-of-distributed-systems/
https://www.youtube.com/watch?v=5Sf8nKRQc8Y  <<<< obkafkatsya
https://habr.com/ru/company/southbridge/blog/688328/
https://habr.com/ru/company/southbridge/blog/544958/ kafka 200 partition
